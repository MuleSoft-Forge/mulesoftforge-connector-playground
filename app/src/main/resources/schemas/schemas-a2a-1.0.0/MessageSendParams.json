{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MessageSendParams",
  "description": "Parameters for sending a task in A2A protocol",
  "required": ["message"],
  "type": "object",
  "properties": {
    "message": {
      "$ref": "#/$defs/Message"
    },
    "configuration": {
      "$ref": "#/$defs/MessageSendConfiguration"
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata for the task",
      "additionalProperties": true
    }
  },
  "$defs": {
    "Message": {
      "type": "object",
      "description": "Message containing task content",
      "required": ["role", "parts", "messageId", "kind"],
      "properties": {
        "role": {
          "type": "string",
          "enum": ["user", "agent"],
          "description": "Indicates the sender: \"user\" (from A2A Client) or \"agent\" (from A2A Server)."
        },
        "parts": {
          "$ref": "#/$defs/Parts"
        },
        "messageId": {
          "type": "string",
          "description": "Unique identifier for the message"
        },
        "taskId": {
          "type": "string",
          "description": "Unique identifier for the task"
        },
        "contextId": {
          "type": "string",
          "description": "Unique context identifier for the task"
        },
        "kind": {
          "type": "string",
          "const": "message",
          "description": "Type discriminator, literal value 'message'."
        },
        "referenceTaskIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "A list of other task IDs that this message references for additional context.",
          "title": "Reference Task Ids"
        },
        "metadata": {
          "type": "object",
          "description": "Additional metadata for the message",
          "additionalProperties": true
        },
        "extensions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The URIs of extensions that are present or contributed to this Message.",
          "title": "Extensions"
        }
      }
    },
    "MessageSendConfiguration": {
      "type": "object",
      "description": "Configuration for sending a message",
      "required": ["acceptedOutputModes"],
      "properties": {
        "acceptedOutputModes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "historyLength": {
          "type": "integer"
        },
        "pushNotificationConfig": {
          "$ref": "#/$defs/PushNotificationConfig"
        },
        "blocking": {
          "type": "boolean",
          "description": "If the server should treat the client as a blocking request."
        }
      }
    },
    "PushNotificationConfig": {
      "type": "object",
      "description": "Configuration for setting up push notifications for task updates.",
      "required": ["url"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the push notification"
        },
        "url": {
          "type": "string",
          "description": "URL for sending the push notifications"
        },
        "token": {
          "type": "string",
          "description": "Optional client-generated opaque token for the client's webhook receiver to validate the notification"
        },
        "authentication": {
          "$ref": "#/$defs/PushNotificationAuthenticationInfo"
        }
      }
    },
    "PushNotificationAuthenticationInfo": {
      "type": "object",
      "description": "Supported authentication schemes - e.g. Basic, Bearer",
      "required": ["schemes"],
      "properties": {
        "schemes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "credentials": {
          "type": "string"
        }
      }
    },
    "Parts": {
      "title": "Parts",
      "type": "array",
      "items": {
        "$ref": "#/$defs/Part"
      }
    },
    "Part": {
      "title": "Part",
      "type": "object",
      "required": [],
      "properties": {
        "kind": {
          "type": "string",
          "enum": ["text", "file", "data"]
        },
        "text": {
          "type": "string"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": true
        },
        "file": {
          "type": "object",
          "description": "Contains the file details and data/reference.",
          "required": [],
          "properties": {
            "bytes": {
              "type": "string",
              "contentEncoding": "base64",
              "description": "Base64 encoded bytes of the file"
            },
            "name": {
              "type": "string"
            },
            "mimeType": {
              "type": "string"
            },
            "uri": {
              "type": "string"
            }
          }
        },
        "data": {
          "type": "object",
          "additionalProperties": true
        }
      }
    }
  }
}
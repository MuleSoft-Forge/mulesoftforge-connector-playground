{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "A2A Task",
  "description": "Task object in A2A protocol",
  "type": "object",
  "required": ["id", "contextId", "kind", "status"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the task"
    },
    "contextId": {
      "type": "string",
      "description": "Server-generated ID for contextual alignment across interactions"
    },
    "status": {
      "$ref": "#/$defs/TaskStatus"
    },
    "artifacts": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/Artifact"
      }
    },
    "history": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/Message"
      }
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata for the task",
      "additionalProperties": true
    },
    "kind": {
      "type": "string",
      "const": "task",
      "description": "Type discriminator, literal value 'task'."
    }
  },
  "$defs": {
    "TaskStatus": {
      "title": "TaskStatus",
      "type": "object",
      "required": [
        "state"
      ],
      "properties": {
        "state": {
          "$ref": "#/$defs/TaskState"
        },
        "message": {
          "$ref": "#/$defs/Message",
          "default": null,
          "description": "Message containing task content"
        },
        "timestamp": {
          "format": "date-time",
          "title": "Timestamp",
          "type": "string"
        }
      }
    },
    "TaskState": {
      "description": "An enumeration.",
      "enum": [
        "submitted",
        "working",
        "input-required",
        "completed",
        "canceled",
        "failed",
        "rejected",
        "auth-required",
        "unknown"
      ],
      "title": "TaskState",
      "type": "string"
    },
    "Artifact": {
      "title": "Artifact",
      "type": "object",
      "required": [
        "artifactId",
        "parts"
      ],
      "properties": {
        "artifactId": {
          "type": "string",
          "description": "Unique identifier for the artifact",
          "title": "ArtifactId"
        },
        "name": {
          "type": "string",
          "default": null,
          "title": "Name"
        },
        "description": {
          "type": "string",
          "default": null,
          "title": "Description"
        },
        "parts": {
          "$ref": "#/$defs/Parts"
        },
        "metadata": {
          "additionalProperties": {},
          "type": "object",
          "default": null,
          "title": "Metadata"
        },
        "extensions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The URIs of extensions that are present or contributed to this Artifact.",
          "title": "Extensions"
        }
      }
    },
    "Message": {
      "type": "object",
      "description": "Message containing task content",
      "required": ["role", "parts", "messageId", "kind"],
      "properties": {
        "role": {
          "type": "string",
          "enum": ["user", "agent"],
          "description": "Indicates the sender: \"user\" (from A2A Client) or \"agent\" (from A2A Server)."
        },
        "parts": {
          "$ref": "#/$defs/Parts"
        },
        "messageId": {
          "type": "string",
          "description": "Unique identifier for the message"
        },
        "taskId": {
          "type": "string",
          "description": "Unique identifier for the task"
        },
        "contextId": {
          "type": "string",
          "description": "Unique context identifier for the task"
        },
        "kind": {
          "type": "string",
          "const": "message",
          "description": "Type discriminator, literal value 'message'."
        },
        "referenceTaskIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "A list of other task IDs that this message references for additional context.",
          "title": "Reference Task Ids"
        },
        "metadata": {
          "type": "object",
          "description": "Additional metadata for the message",
          "additionalProperties": true
        },
        "extensions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The URIs of extensions that are present or contributed to this Message.",
          "title": "Extensions"
        }
      }
    },
    "Parts": {
      "title": "Parts",
      "type": "array",
      "items": {
        "$ref": "#/$defs/Part"
      }
    },
    "Part": {
      "title": "Part",
      "type": "object",
      "required": [],
      "properties": {
        "kind": {
          "type": "string",
          "enum": ["text", "file", "data"]
        },
        "text": {
          "type": "string"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": true
        },
        "file": {
          "type": "object",
          "description": "Contains the file details and data/reference.",
          "required": [],
          "properties": {
            "bytes": {
              "type": "string",
              "contentEncoding": "base64",
              "description": "Base64 encoded bytes of the file"
            },
            "name": {
              "type": "string"
            },
            "mimeType": {
              "type": "string"
            },
            "uri": {
              "type": "string"
            }
          }
        },
        "data": {
          "type": "object",
          "additionalProperties": true
        }
      }
    }
  }
}
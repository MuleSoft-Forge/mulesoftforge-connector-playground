{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "TaskArtifactUpdateEvent",
  "description": "Event for task artifact updates in A2A streaming as defined in A2A Protocol specification",
  "type": "object",
  "required": ["taskId", "contextId", "kind", "artifact"],
  "properties": {
    "taskId": {
      "type": "string",
      "description": "Task identifier"
    },
    "contextId": {
      "type": "string",
      "description": "The context the task is associated with"
    },
    "kind": {
      "type": "string",
      "const": "artifact-update",
      "description": "Type discriminator for artifact update events"
    },
    "artifact": {
      "$ref": "#/definitions/Artifact",
      "description": "Generated artifact"
    },
    "append": {
      "type": "boolean",
      "description": "Indicates if this artifact appends to a previous one"
    },
    "lastChunk": {
      "type": "boolean",
      "description": "Indicates if this is the last chunk of the artifact"
    },
    "metadata": {
      "type": "object",
      "description": "Extension metadata",
      "additionalProperties": true
    }
  },
  "definitions": {
    "Artifact": {
      "title": "Artifact",
      "type": "object",
      "required": ["artifactId", "parts"],
      "properties": {
        "artifactId": {
          "type": "string",
          "description": "Unique identifier for the artifact"
        },
        "name": {
          "type": "string",
          "description": "Optional name for the artifact"
        },
        "description": {
          "type": "string",
          "description": "Optional description for the artifact"
        },
        "parts": {
          "$ref": "#/definitions/Parts"
        },
        "metadata": {
          "type": "object",
          "description": "Extension metadata",
          "additionalProperties": true
        },
        "extensions": {
          "type": "array",
          "description": "The URIs of extensions that are present or contributed to this Artifact",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Parts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Part"
      }
    },
    "Part": {
      "title": "Part",
      "type": "object",
      "required": [],
      "properties": {
        "name": {
          "title": "Name",
          "type": "string"
        },
        "mimeType": {
          "title": "MimeType",
          "type": "string"
        },
        "type": {
          "description": "Type of the part",
          "title": "Type",
          "type": "string",
          "enum": ["text", "file", "data"]
        },
        "kind": {
          "type": "string",
          "enum": ["text", "file", "data"]
        },
        "text": {
          "type": "string",
          "description": "Text content (for text parts)"
        },
        "file": {
          "$ref": "#/definitions/File",
          "description": "File content (for file parts)"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "File": {
      "type": "object",
      "description": "Contains the file details and data/reference.",
      "required": [],
      "properties": {
        "bytes": {
          "type": "string",
          "contentEncoding": "base64",
          "description": "Base64 encoded bytes of the file"
        },
        "name": {
          "type": "string"
        },
        "mimeType": {
          "type": "string"
        },
        "uri": {
          "type": "string"
        }
      }
    }
  }
}
